{
	"info": {
		"_postman_id": "b3788d4e-e0c0-4cdb-8039-4b9cc52b1d99",
		"name": "postman-ejercicio",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "login",
			"item": [
				{
					"name": "login ok",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var data = pm.response.json();\r",
									"var token = data.user.token;\r",
									"\r",
									"// Set token to enviroment variable\r",
									"pm.collectionVariables.set(\"token\", token);\r",
									"\r",
									"//Test response status ok\r",
									"pm.test(\"answer ok\", function () {\r",
									"    pm.expect(pm.response).have.status(\"OK\");\r",
									"});\r",
									"\r",
									"//Test answer status 200\r",
									"pm.test(\"codigo 200 ok\", ()=>{\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"\r",
									"//Test tiempo de respuesta\r",
									"pm.test(\"tiempo de respuesta\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(500);\r",
									"});\r",
									"\r",
									"// Test string user in response\r",
									"pm.test(\"matching\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"user\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "default"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"user\": {\r\n        \"email\": \"jcam.qvision@gmail.com\",\r\n        \"password\": \"testerExtremo\"\r\n    }\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{host}}/{{login-path}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{login-path}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "login no user exist",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//Test response invalid\r",
									"pm.test(\"invalid pasword\", function () {\r",
									"    pm.expect(pm.response.text()).contains(\"invalid\");\r",
									"});\r",
									"\r",
									"//Test answer\r",
									"pm.test(\"answer Forbidden\", ()=>{\r",
									"    pm.response.to.have.status(403);\r",
									"});\r",
									"//Test tiempo de respuesta\r",
									"pm.test(\"tiempo de respuesta\", function () {\r",
									"    pm.expect(pm.response.responseTime).to.be.below(500);\r",
									"});\r",
									"\r",
									"// \r",
									"pm.test(\"matching errors string\", function () {\r",
									"    pm.expect(pm.response.text()).to.include(\"errors\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"user\": {\r\n        \"email\": \"jcam.qvision@gmail.com\",\r\n        \"password\": \"password123\"\r\n    }\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{host}}/{{login-path}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{login-path}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "tags",
			"item": [
				{
					"name": "tags no login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();\r",
									"// Test status\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"//  Contenido de los tags\r",
									"pm.test(\"tags content\", function (){\r",
									"    pm.expect(jsonData.tags).to.have.members(\r",
									"        [\"implementations\",\r",
									"        \"welcome\",\r",
									"        \"codebaseShow\",\r",
									"        \"introduction\"]);\r",
									"});\r",
									"\r",
									"// probar que los tags vienen en un array\r",
									"pm.test(\"tags response is an array\", function () {\r",
									"    pm.expect(jsonData.tags).to.be.an(\"array\");\r",
									"});\r",
									"\r",
									"// Test array lenght 4\r",
									"pm.test(\"tags length\", ()=>{ \r",
									"    pm.expect(jsonData.tags).to.have.length(4);\r",
									"});\r",
									"\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json; charset=utf-8",
								"type": "default"
							},
							{
								"key": "",
								"value": "",
								"type": "default",
								"disabled": true
							}
						],
						"url": {
							"raw": "{{host}}/{{tags}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{tags}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "test tag in new article (looping request))",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"var host = pm.collectionVariables.get(\"host\");\r",
									"var token = pm.collectionVariables.get(\"token\");\r",
									"var tags = pm.collectionVariables.get(\"tags\");\r",
									"// var articles = pm.collectionVariables.get(\"articles\");\r",
									"// const getArticles = {\r",
									"//     url: `${host}/${articles}/?limit=10&offset=0`,\r",
									"//     method: \"get\",\r",
									"//     header: `Authorization: Bearer ${token}`,\r",
									"//     body: {}\r",
									"// }\r",
									"const getUserTags = {\r",
									"    url: `${host}/${tags}`,\r",
									"    method: 'GET',\r",
									"    header: `Authorization: Bearer ${token}`,\r",
									"    body: {}\r",
									"  };\r",
									"// envio de peticion get para obtener inicialmente los tags del usuario\r",
									"// debe haber 0\r",
									"pm.sendRequest(getUserTags, function(err, response){\r",
									"    try{\r",
									"        \r",
									"        let tagsCount = response.json().tags.length;\r",
									"        pm.collectionVariables.set(\"tagsCount\", tagsCount);\r",
									"        \r",
									"        // test de la peticion get\r",
									"        pm.test(\"get tags have status 200 ok\", function(){\r",
									"            pm.expect(response).to.have.property('code', 200);\r",
									"            setTimeout(function(){},500);\r",
									"        });\r",
									"    } catch(err){\r",
									"        console.error(err)\r",
									"    }\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"const articleResponse = {\r",
									"    \"type\": \"object\",\r",
									"    \"title\": \"The root schema\",\r",
									"    \"description\": \"The root schema comprises the entire JSON document.\",\r",
									"    \"default\": {},\r",
									"    \"examples\": [\r",
									"        {\r",
									"            \"article\": {\r",
									"                \"slug\": \"est-provident-tempore-9550\",\r",
									"                \"title\": \"est provident tempore\",\r",
									"                \"description\": \"Doloribus sint exercitationem cumque.\",\r",
									"                \"body\": \"Similique beatae alias occaecati est et repellat et voluptatum qui. Quisquam libero excepturi quis molestias. Adipisci error similique.\",\r",
									"                \"createdAt\": \"2022-01-24T18:09:47.475Z\",\r",
									"                \"updatedAt\": \"2022-01-24T18:09:47.475Z\",\r",
									"                \"tagList\": [\r",
									"                    \"test\"\r",
									"                ],\r",
									"                \"author\": {\r",
									"                    \"username\": \"Donatelo\",\r",
									"                    \"bio\": null,\r",
									"                    \"image\": \"https://api.realworld.io/images/smiley-cyrus.jpeg\"\r",
									"                },\r",
									"                \"favoritedBy\": [],\r",
									"                \"_count\": {\r",
									"                    \"favoritedBy\": 0\r",
									"                },\r",
									"                \"favoritesCount\": 0,\r",
									"                \"favorited\": false\r",
									"            }\r",
									"        }\r",
									"    ],\r",
									"    \"required\": [\r",
									"        \"article\"\r",
									"    ],\r",
									"    \"properties\": {\r",
									"        \"article\": {\r",
									"            \"$id\": \"#/properties/article\",\r",
									"            \"type\": \"object\",\r",
									"            \"title\": \"The article schema\",\r",
									"            \"description\": \"An explanation about the purpose of this instance.\",\r",
									"            \"default\": {},\r",
									"            \"examples\": [\r",
									"                {\r",
									"                    \"slug\": \"est-provident-tempore-9550\",\r",
									"                    \"title\": \"est provident tempore\",\r",
									"                    \"description\": \"Doloribus sint exercitationem cumque.\",\r",
									"                    \"body\": \"Similique beatae alias occaecati est et repellat et voluptatum qui. Quisquam libero excepturi quis molestias. Adipisci error similique.\",\r",
									"                    \"createdAt\": \"2022-01-24T18:09:47.475Z\",\r",
									"                    \"updatedAt\": \"2022-01-24T18:09:47.475Z\",\r",
									"                    \"tagList\": [\r",
									"                        \"test\"\r",
									"                    ],\r",
									"                    \"author\": {\r",
									"                        \"username\": \"Donatelo\",\r",
									"                        \"bio\": null,\r",
									"                        \"image\": \"https://api.realworld.io/images/smiley-cyrus.jpeg\"\r",
									"                    },\r",
									"                    \"favoritedBy\": [],\r",
									"                    \"_count\": {\r",
									"                        \"favoritedBy\": 0\r",
									"                    },\r",
									"                    \"favoritesCount\": 0,\r",
									"                    \"favorited\": false\r",
									"                }\r",
									"            ],\r",
									"            \"required\": [\r",
									"                \"slug\",\r",
									"                \"title\",\r",
									"                \"description\",\r",
									"                \"body\",\r",
									"                \"createdAt\",\r",
									"                \"updatedAt\",\r",
									"                \"tagList\",\r",
									"                \"author\",\r",
									"                \"favoritedBy\",\r",
									"                \"_count\",\r",
									"                \"favoritesCount\",\r",
									"                \"favorited\"\r",
									"            ],\r",
									"            \"properties\": {\r",
									"                \"slug\": {\r",
									"                    \"$id\": \"#/properties/article/properties/slug\",\r",
									"                    \"type\": \"string\",\r",
									"                    \"title\": \"The slug schema\",\r",
									"                    \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                    \"default\": \"\",\r",
									"                    \"examples\": [\r",
									"                        \"est-provident-tempore-9550\"\r",
									"                    ]\r",
									"                },\r",
									"                \"title\": {\r",
									"                    \"$id\": \"#/properties/article/properties/title\",\r",
									"                    \"type\": \"string\",\r",
									"                    \"title\": \"The title schema\",\r",
									"                    \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                    \"default\": \"\",\r",
									"                    \"examples\": [\r",
									"                        \"est provident tempore\"\r",
									"                    ]\r",
									"                },\r",
									"                \"description\": {\r",
									"                    \"$id\": \"#/properties/article/properties/description\",\r",
									"                    \"type\": \"string\",\r",
									"                    \"title\": \"The description schema\",\r",
									"                    \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                    \"default\": \"\",\r",
									"                    \"examples\": [\r",
									"                        \"Doloribus sint exercitationem cumque.\"\r",
									"                    ]\r",
									"                },\r",
									"                \"body\": {\r",
									"                    \"$id\": \"#/properties/article/properties/body\",\r",
									"                    \"type\": \"string\",\r",
									"                    \"title\": \"The body schema\",\r",
									"                    \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                    \"default\": \"\",\r",
									"                    \"examples\": [\r",
									"                        \"Similique beatae alias occaecati est et repellat et voluptatum qui. Quisquam libero excepturi quis molestias. Adipisci error similique.\"\r",
									"                    ]\r",
									"                },\r",
									"                \"createdAt\": {\r",
									"                    \"$id\": \"#/properties/article/properties/createdAt\",\r",
									"                    \"type\": \"string\",\r",
									"                    \"title\": \"The createdAt schema\",\r",
									"                    \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                    \"default\": \"\",\r",
									"                    \"examples\": [\r",
									"                        \"2022-01-24T18:09:47.475Z\"\r",
									"                    ]\r",
									"                },\r",
									"                \"updatedAt\": {\r",
									"                    \"$id\": \"#/properties/article/properties/updatedAt\",\r",
									"                    \"type\": \"string\",\r",
									"                    \"title\": \"The updatedAt schema\",\r",
									"                    \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                    \"default\": \"\",\r",
									"                    \"examples\": [\r",
									"                        \"2022-01-24T18:09:47.475Z\"\r",
									"                    ]\r",
									"                },\r",
									"                \"tagList\": {\r",
									"                    \"$id\": \"#/properties/article/properties/tagList\",\r",
									"                    \"type\": \"array\",\r",
									"                    \"title\": \"The tagList schema\",\r",
									"                    \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                    \"default\": [],\r",
									"                    \"examples\": [\r",
									"                        [\r",
									"                            \"test\"\r",
									"                        ]\r",
									"                    ],\r",
									"                    \"additionalItems\": true,\r",
									"                    \"items\": {\r",
									"                        \"$id\": \"#/properties/article/properties/tagList/items\",\r",
									"                        \"anyOf\": [\r",
									"                            {\r",
									"                                \"$id\": \"#/properties/article/properties/tagList/items/anyOf/0\",\r",
									"                                \"type\": \"string\",\r",
									"                                \"title\": \"The first anyOf schema\",\r",
									"                                \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                                \"default\": \"\",\r",
									"                                \"examples\": [\r",
									"                                    \"test\"\r",
									"                                ]\r",
									"                            }\r",
									"                        ]\r",
									"                    }\r",
									"                },\r",
									"                \"author\": {\r",
									"                    \"$id\": \"#/properties/article/properties/author\",\r",
									"                    \"type\": \"object\",\r",
									"                    \"title\": \"The author schema\",\r",
									"                    \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                    \"default\": {},\r",
									"                    \"examples\": [\r",
									"                        {\r",
									"                            \"username\": \"Donatelo\",\r",
									"                            \"bio\": null,\r",
									"                            \"image\": \"https://api.realworld.io/images/smiley-cyrus.jpeg\"\r",
									"                        }\r",
									"                    ],\r",
									"                    \"required\": [\r",
									"                        \"username\",\r",
									"                        \"bio\",\r",
									"                        \"image\"\r",
									"                    ],\r",
									"                    \"properties\": {\r",
									"                        \"username\": {\r",
									"                            \"$id\": \"#/properties/article/properties/author/properties/username\",\r",
									"                            \"type\": \"string\",\r",
									"                            \"title\": \"The username schema\",\r",
									"                            \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                            \"default\": \"\",\r",
									"                            \"examples\": [\r",
									"                                \"Donatelo\"\r",
									"                            ]\r",
									"                        },\r",
									"                        \"bio\": {\r",
									"                            \"$id\": \"#/properties/article/properties/author/properties/bio\",\r",
									"                            \"type\": \"null\",\r",
									"                            \"title\": \"The bio schema\",\r",
									"                            \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                            \"default\": null,\r",
									"                            \"examples\": [\r",
									"                                null\r",
									"                            ]\r",
									"                        },\r",
									"                        \"image\": {\r",
									"                            \"$id\": \"#/properties/article/properties/author/properties/image\",\r",
									"                            \"type\": \"string\",\r",
									"                            \"title\": \"The image schema\",\r",
									"                            \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                            \"default\": \"\",\r",
									"                            \"examples\": [\r",
									"                                \"https://api.realworld.io/images/smiley-cyrus.jpeg\"\r",
									"                            ]\r",
									"                        }\r",
									"                    },\r",
									"                    \"additionalProperties\": true\r",
									"                },\r",
									"                \"favoritedBy\": {\r",
									"                    \"$id\": \"#/properties/article/properties/favoritedBy\",\r",
									"                    \"type\": \"array\",\r",
									"                    \"title\": \"The favoritedBy schema\",\r",
									"                    \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                    \"default\": [],\r",
									"                    \"examples\": [\r",
									"                        []\r",
									"                    ],\r",
									"                    \"additionalItems\": true,\r",
									"                    \"items\": {\r",
									"                        \"$id\": \"#/properties/article/properties/favoritedBy/items\"\r",
									"                    }\r",
									"                },\r",
									"                \"_count\": {\r",
									"                    \"$id\": \"#/properties/article/properties/_count\",\r",
									"                    \"type\": \"object\",\r",
									"                    \"title\": \"The _count schema\",\r",
									"                    \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                    \"default\": {},\r",
									"                    \"examples\": [\r",
									"                        {\r",
									"                            \"favoritedBy\": 0\r",
									"                        }\r",
									"                    ],\r",
									"                    \"required\": [\r",
									"                        \"favoritedBy\"\r",
									"                    ],\r",
									"                    \"properties\": {\r",
									"                        \"favoritedBy\": {\r",
									"                            \"$id\": \"#/properties/article/properties/_count/properties/favoritedBy\",\r",
									"                            \"type\": \"integer\",\r",
									"                            \"title\": \"The favoritedBy schema\",\r",
									"                            \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                            \"default\": 0,\r",
									"                            \"examples\": [\r",
									"                                0\r",
									"                            ]\r",
									"                        }\r",
									"                    },\r",
									"                    \"additionalProperties\": true\r",
									"                },\r",
									"                \"favoritesCount\": {\r",
									"                    \"$id\": \"#/properties/article/properties/favoritesCount\",\r",
									"                    \"type\": \"integer\",\r",
									"                    \"title\": \"The favoritesCount schema\",\r",
									"                    \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                    \"default\": 0,\r",
									"                    \"examples\": [\r",
									"                        0\r",
									"                    ]\r",
									"                },\r",
									"                \"favorited\": {\r",
									"                    \"$id\": \"#/properties/article/properties/favorited\",\r",
									"                    \"type\": \"boolean\",\r",
									"                    \"title\": \"The favorited schema\",\r",
									"                    \"description\": \"An explanation about the purpose of this instance.\",\r",
									"                    \"default\": false,\r",
									"                    \"examples\": [\r",
									"                        false\r",
									"                    ]\r",
									"                }\r",
									"            },\r",
									"            \"additionalProperties\": true\r",
									"        }\r",
									"    },\r",
									"    \"additionalProperties\": true\r",
									"}\r",
									"\r",
									"var host = pm.collectionVariables.get(\"host\");\r",
									"var articles = pm.collectionVariables.get(\"articles\");\r",
									"var token = pm.collectionVariables.get(\"token\");\r",
									"\r",
									"const getGlobalFeed = {\r",
									"    url:`${host}/${articles}/?limit=10&offset=0`,\r",
									"    method: \"get\",\r",
									"    header: `Authorization: Bearer ${token}`,\r",
									"    body: {}  \r",
									"};\r",
									"\r",
									"// test post articulo nuevo para nuevo tag\r",
									"pm.test(\"Post new article got Status code 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"// valid schema test\r",
									"pm.test(\"Valid response to post article with purpose to add a new tag\", () =>{\r",
									"    setTimeout(function(){}, 500);\r",
									"    pm.response.to.have.jsonSchema(articleResponse);\r",
									"});\r",
									"// peticion get global feed para contar los articulos\r",
									"pm.sendRequest(getGlobalFeed, function(error, response){\r",
									"    pm.test(\"get global feed after post has status OK\", function(){\r",
									"        setTimeout(function(){}, 500);\r",
									"        pm.expect(response).to.have.property(\"code\", 200);\r",
									"    });\r",
									"    let articlesCount = response.json().articlesCount;\r",
									"    pm.collectionVariables.set(\"articleCounter\", articlesCount);\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "default",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n   \"article\":{\r\n      \"tagList\":[\r\n         \"{{$randomLoremWord}}\"\r\n      ],\r\n      \"title\": \"{{$randomLoremWords}}\",\r\n      \"description\":\"{{$randomLoremSentence}}\",\r\n      \"body\":\"{{$randomLoremParagraph}}\"\r\n   }\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{host}}/{{articles}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "tags login (looping request)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();\r",
									"//tomamos la variable de cuenta de los articulos\r",
									"var articleCount = pm.collectionVariables.get(\"articleCounter\");\r",
									"// new tags count\r",
									"var tagsNewCount = jsonData.tags.length;\r",
									"// put the last count in a variable\r",
									"let countedTags = pm.collectionVariables.get(\"tagsCount\");\r",
									"// get status\r",
									"pm.test(\"Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"// probar que los tags vienen en un array\r",
									"pm.test(\"tags response is an array\", function () {\r",
									"    pm.expect(jsonData.tags).to.be.an(\"array\");\r",
									"});\r",
									"\r",
									"// tags array lenght has increased by 1\r",
									"pm.test(\"tags array length has increased by 1\", ()=>{ \r",
									"    pm.expect(jsonData.tags).to.have.length(countedTags+1);\r",
									"});\r",
									"// variables count has increased by 1\r",
									"pm.test(\"tags counting has increased by 1\", ()=>{ \r",
									"    pm.expect(tagsNewCount).equals(countedTags+1);\r",
									"});\r",
									"\r",
									"// luego del post hay 4 articulos\r",
									"// si hay menos de 8 vamos a postear otros 5 articulos\r",
									"// para un total de 10 tags diferentes que permite el array\r",
									"if(articleCount<=8){\r",
									"    postman.setNextRequest(\"test tag in new article (looping request))\");\r",
									"    setTimeout(function(){}, 500);\r",
									"}\r",
									"\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json; charset=utf-8",
								"type": "default"
							},
							{
								"key": "",
								"value": "",
								"type": "default",
								"disabled": true
							}
						],
						"url": {
							"raw": "{{host}}/{{tags}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{tags}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "articles",
			"item": [
				{
					"name": "new article (loop sendRequest))",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"var host = pm.collectionVariables.get(\"host\");\r",
									"var articles = pm.collectionVariables.get(\"articles\");\r",
									"var token = pm.collectionVariables.get(\"token\");\r",
									"var articlesRequest;\r",
									"var userArticlesCount;\r",
									"var articleSlug;\r",
									"\r",
									"const getUserArticles = {\r",
									"    url:`${host}/${articles}/?author=Donatelo&limit=10&offset=0`,\r",
									"    method: \"get\",\r",
									"    header: `Authorization: Bearer ${token}`,\r",
									"    body: {}  \r",
									"};\r",
									"// peticion get para traer articulos del global feed\r",
									"pm.sendRequest(getUserArticles, function(error, response){\r",
									"    setTimeout(function(){}, 500);\r",
									"    try{\r",
									"        articlesRequest = response.json();\r",
									"        userArticlesCount = articlesRequest.articlesCount;\r",
									"        // loop para borrar todos los articulos\r",
									"        while(userArticlesCount > 0){\r",
									"            // loop para recorrer los articulos y extraer el slug\r",
									"            for(var i = 0; i <= userArticlesCount; i++){\r",
									"                articleSlug = articlesRequest.articles[i].slug;\r",
									"                const deleteArticle = {\r",
									"                url:`${host}/${articles}/${articleSlug}`,\r",
									"                method: \"delete\",\r",
									"                header: `Authorization: Bearer ${token}`,\r",
									"                body: {}  \r",
									"                };\r",
									"\r",
									"                // borrar todos los articulos creados del folder tags\r",
									"                pm.sendRequest(deleteArticle,function(error, resp){\r",
									"                    setTimeout(function(){}, 500);\r",
									"                    pm.test(\"article deleted successful\", function(){\r",
									"                        pm.expect(resp).to.have.property(\"code\", 204);\r",
									"                    });\r",
									"                userArticlesCount = userArticlesCount-1;\r",
									"                });\r",
									"            }\r",
									"        }\r",
									"    }catch(error){\r",
									"        console.error(error);\r",
									"    }\r",
									"    setTimeout(function(){}, 500);\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"var data = pm.response.json();\r",
									"var slug = data.article.slug\r",
									"pm.collectionVariables.set(\"slug\", slug);\r",
									"\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "",
								"value": "",
								"type": "default",
								"disabled": true
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n   \"article\":{\r\n      \"tagList\":[\r\n         \"test\"\r\n      ],\r\n      \"title\":\"permanent test\",\r\n      \"description\":\"about testing\",\r\n      \"body\":\"this new article is written in english\"\r\n   }\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{host}}/{{articles}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "get articulo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"get article Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"pm.test(\"article title matches 'permanent test'\", function () {\r",
									"    pm.expect(pm.response.json().article.title).equals(\"permanent test\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{host}}/{{articles}}/{{slug}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}",
								"{{slug}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "global feed no login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Step 1: Get articles of the global feed\r",
									"// Step 2: Get the slug ID for the first article, save it to variable\r",
									"\r",
									"pm.test(\"get global feed articles got status code 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"\r",
									"var slug = pm.response.json().articles[0].slug;\r",
									"pm.collectionVariables.set(\"slug\", slug);\r",
									"\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{host}}/{{articles}}?limit=10&offset=0",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}"
							],
							"query": [
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "offset",
									"value": "0"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "update article",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"update got status code 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n   \"article\":{\r\n      \"title\":\"permanent test\",\r\n      \"slug\":\"permanent-test-9550\",\r\n      \"body\":\"this new article is written in english\\n\\n\\nedicion realizada\",\r\n      \"description\":\"about testing\",\r\n      \"createdAt\":\"2022-01-11T20:30:13.714Z\",\r\n      \"updatedAt\":\"2022-01-11T20:30:13.714Z\",\r\n      \"tagList\":[\r\n         \"implementations\"\r\n      ],\r\n      \"favoritesCount\":0,\r\n      \"favorited\":false,\r\n      \"author\":{\r\n         \"username\":\"Donatelo\",\r\n         \"bio\":null,\r\n         \"image\":\"https://api.realworld.io/images/smiley-cyrus.jpeg\",\r\n         \"followedBy\":[\r\n            \r\n         ],\r\n         \"following\":false\r\n      }\r\n   }\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{host}}/{{articles}}/{{slug}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}",
								"{{slug}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "del articulo",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"\r",
									"pm.test(\"delete\", function () {\r",
									"    pm.response.to.have.status(204);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{host}}/{{articles}}/{{slug}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}",
								"{{slug}}"
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "bearer",
				"bearer": [
					{
						"key": "token",
						"value": "{{token}}",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "comment",
			"item": [
				{
					"name": "new article Copy",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"\r",
									"\r",
									"\r",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"var data = pm.response.json();\r",
									"var slug = data.article.slug\r",
									"pm.collectionVariables.set(\"slug\", slug);\r",
									"\r",
									"pm.test(\" post test article has Status code 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n   \"article\":{\r\n      \"tagList\":[\r\n         \"implementations\"\r\n      ],\r\n      \"title\":\"permanent test\",\r\n      \"description\":\"about testing\",\r\n      \"body\":\"this new article is written in english\"\r\n   }\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{host}}/{{articles}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "get article comments",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"get article comments has status code 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{host}}/{{articles}}/{{slug}}/{{comments}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}",
								"{{slug}}",
								"{{comments}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Post comment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"post test comment Status code is 200\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"var data = pm.response.json();\r",
									"var id = data.comment.id;\r",
									"\r",
									"pm.collectionVariables.set(\"id_comment\", id);\r",
									"\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n   \"comment\":{\r\n      \"body\":\"este es un comentario\"\r\n   }\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{host}}/{{articles}}/{{slug}}/{{comments}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}",
								"{{slug}}",
								"{{comments}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete article comments",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"delete test comment has Status code 200\", function () {\r",
									"    pm.response.to.have.status(204);\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{host}}/{{articles}}/{{slug}}/{{comments}}/{{id_comment}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}",
								"{{slug}}",
								"{{comments}}",
								"{{id_comment}}"
							]
						}
					},
					"response": []
				}
			],
			"auth": {
				"type": "bearer",
				"bearer": [
					{
						"key": "token",
						"value": "{{token}}",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "Homework - favorites & comments",
			"item": [
				{
					"name": "Post a new like",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Favorite article\r",
									"// Step 1: Get articles of the global feed\r",
									"//Step 2: Get favorites count and slug ID for the first article\r",
									"\r",
									"\r",
									"var host = pm.collectionVariables.get(\"host\");\r",
									"var articles = pm.collectionVariables.get(\"articles\");\r",
									"var token = pm.collectionVariables.get(\"token\");\r",
									"\r",
									"/**\r",
									" *  usamos este get para tomar los articulos y revisar el contador de favoritos\r",
									" * si esta en uno, se va a borrar el favorito\r",
									" * si esta en 0 (por que manualmente se cambio) se omite el delete\r",
									" */\r",
									"\r",
									"const getArticles = {\r",
									"    url: `${host}/${articles}/?limit=10&offset=0`,\r",
									"    method: 'GET',\r",
									"    header: `Authorization: Bearer ${token}`,\r",
									"    body: {}\r",
									"  };\r",
									"\r",
									"pm.sendRequest(getArticles, function (err, response) {\r",
									"    var res = response;\r",
									"    pm.test(\"get feed code 200\", function(){\r",
									"        pm.expect(res).to.have.property('code',200);\r",
									"        setTimeout(function(){}, 500);\r",
									"    });\r",
									"    //console.log(res);\r",
									"    var data = res.json();\r",
									"    var slug = data.articles[0].slug;\r",
									"    pm.collectionVariables.set(\"slug\", slug);\r",
									"    //console.log(slug);\r",
									"    var initialFavoritesCount = data.articles[0].favoritesCount;\r",
									"    pm.collectionVariables.set(\"initialFavoritesCount\", initialFavoritesCount);\r",
									"    //console.log(initialFavoritesCount);\r",
									"\r",
									"    if(initialFavoritesCount == 1){\r",
									"        const delFavorite = {\r",
									"        url: `${host}/${articles}/${slug}/favorite`,\r",
									"        method: 'DELETE',\r",
									"        header: `Authorization: Bearer ${token}`,\r",
									"        body: {}\r",
									"        };\r",
									"\r",
									"\r",
									"        pm.sendRequest(delFavorite, function (err, response) {\r",
									"            pm.test(\"favorite deleted got status code 200\", function(){\r",
									"                pm.expect(response).to.have.property('code', 200);\r",
									"                setTimeout(function(){}, 500);\r",
									"            });\r",
									"        });\r",
									"\r",
									"\r",
									"        pm.sendRequest(getArticles, function (err, response) {\r",
									"            var res = response;\r",
									"            pm.test(\"get feed articles got code 200\", function(){\r",
									"                pm.expect(res).to.have.property('code',200);\r",
									"                setTimeout(function(){}, 500);\r",
									"                });\r",
									"            var data = res.json();\r",
									"            var slug = data.articles[0].slug;\r",
									"            pm.collectionVariables.set(\"slug\", slug);\r",
									"            var finalFavoritesCount = data.articles[0].favoritesCount;\r",
									"            pm.collectionVariables.set(\"finalFavoritesCount\", finalFavoritesCount);\r",
									"        });\r",
									"    }\r",
									"});\r",
									"\r",
									"\r",
									"        \r",
									"\r",
									"\r",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Step 3: Make POST request to increse favorites count for the first article\r",
									"// Test runs just after method post\r",
									"// Step 4: Verify response schema\r",
									"// response schema\r",
									"const postFavoriteSchema = {\r",
									"    \"type\": \"object\",\r",
									"    \"properties\": {\r",
									"        \"article\": {\r",
									"            \"type\": \"object\",\r",
									"            \"required\": [\r",
									"                \"id\",\r",
									"                \"slug\",\r",
									"                \"title\",\r",
									"                \"description\",\r",
									"                \"body\",\r",
									"                \"createdAt\",\r",
									"                \"updatedAt\",\r",
									"                \"authorId\",\r",
									"                \"tagList\",\r",
									"                \"author\",\r",
									"                \"favoritedBy\",\r",
									"                \"favorited\",\r",
									"                \"favoritesCount\"\r",
									"            ],\r",
									"            \"properties\": {\r",
									"                \"id\": {\r",
									"                    \"type\": \"integer\"\r",
									"                },\r",
									"                \"slug\": {\r",
									"                    \"type\": \"string\"\r",
									"                },\r",
									"                \"title\": {\r",
									"                    \"type\": \"string\"\r",
									"                },\r",
									"                \"description\": {\r",
									"                    \"type\": \"string\"\r",
									"                },\r",
									"                \"body\": {\r",
									"                    \"type\": \"string\"\r",
									"                },\r",
									"                \"createdAt\": {\r",
									"                    \"type\": \"string\"\r",
									"                },\r",
									"                \"updatedAt\": {\r",
									"                    \"type\": \"string\"\r",
									"                },\r",
									"                \"authorId\": {\r",
									"                    \"type\": \"integer\"\r",
									"                },\r",
									"                \"tagList\": {\r",
									"                    \"type\": \"array\",\r",
									"                    \"items\": {\r",
									"                        \"type\": \"string\"\r",
									"                    }\r",
									"                },\r",
									"                \"author\": {\r",
									"                    \"type\": \"object\",\r",
									"                    \"required\": [\r",
									"                        \"username\",\r",
									"                        \"bio\",\r",
									"                        \"image\",\r",
									"                        \"following\"\r",
									"                    ],\r",
									"                    \"properties\": {\r",
									"                        \"username\": {\r",
									"                            \"type\": \"string\"\r",
									"                        },\r",
									"                        \"bio\": {\r",
									"                            \"type\": \"null\"\r",
									"                        },\r",
									"                        \"image\": {\r",
									"                            \"type\": \"string\"\r",
									"                        },\r",
									"                        \"following\": {\r",
									"                            \"type\": \"boolean\"\r",
									"                        }\r",
									"                    }\r",
									"                },\r",
									"                \"favoritedBy\": {\r",
									"                    \"type\": \"array\",\r",
									"                    \"items\": {\r",
									"                        \"type\": \"object\",\r",
									"                        \"required\": [\r",
									"                            \"id\",\r",
									"                            \"email\",\r",
									"                            \"username\",\r",
									"                            \"password\",\r",
									"                            \"image\",\r",
									"                            \"bio\",\r",
									"                            \"demo\"\r",
									"                        ],\r",
									"                        \"properties\": {\r",
									"                            \"id\": {\r",
									"                                \"type\": \"integer\"\r",
									"                            },\r",
									"                            \"email\": {\r",
									"                                \"type\": \"string\"\r",
									"                            },\r",
									"                            \"username\": {\r",
									"                                \"type\": \"string\"\r",
									"                            },\r",
									"                            \"password\": {\r",
									"                                \"type\": \"string\"\r",
									"                            },\r",
									"                            \"image\": {\r",
									"                                \"type\": \"string\"\r",
									"                            },\r",
									"                            \"bio\": {\r",
									"                                \"type\": \"null\"\r",
									"                            },\r",
									"                            \"demo\": {\r",
									"                                \"type\": \"boolean\"\r",
									"                            }\r",
									"                        }\r",
									"                    }\r",
									"                },\r",
									"                \"favorited\": {\r",
									"                    \"type\": \"boolean\"\r",
									"                },\r",
									"                \"favoritesCount\": {\r",
									"                    \"type\": \"integer\"\r",
									"                }\r",
									"            }\r",
									"        }\r",
									"    }\r",
									"}\r",
									"// valid schema test\r",
									"pm.test(\"Valid response to post method schema favorites\", () =>{\r",
									"    pm.response.to.have.jsonSchema(postFavoriteSchema);\r",
									"    setTimeout(function(){}, 500);\r",
									"});\r",
									"// favorites in 1 always test\r",
									"pm.test(\"always favoritesCount should be 1\", function () {\r",
									"    pm.expect(pm.response.json().article.favoritesCount).eqls(1);\r",
									"});\r",
									"// username variable saved and username test\r",
									"var username = pm.response.json().article.author.username;\r",
									"pm.collectionVariables.set(\"username\", username);\r",
									"pm.test(\"always username should be Donatelo\", function () {\r",
									"    pm.expect(pm.response.json().article.author.username).eqls(\"Donatelo\");\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{host}}/{{articles}}/{{slug}}/favorite",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}",
								"{{slug}}",
								"favorite"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get the liked posts",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Step 6: Get all favorite articles\r",
									"pm.test(\"method get favorited articles got status code\", function () {\r",
									"    pm.response.to.have.status(200);\r",
									"});\r",
									"// Step 7: Verify response schema\r",
									"const getFavoritedArticlesResponse = {\r",
									"    \"type\": \"object\",\r",
									"    \"properties\": {\r",
									"        \"articles\": {\r",
									"            \"type\": \"array\",\r",
									"            \"items\": {\r",
									"                \"type\": \"object\",\r",
									"                \"required\": [\r",
									"                    \"slug\",\r",
									"                    \"title\",\r",
									"                    \"description\",\r",
									"                    \"body\",\r",
									"                    \"createdAt\",\r",
									"                    \"updatedAt\",\r",
									"                    \"tagList\",\r",
									"                    \"author\",\r",
									"                    \"favoritesCount\",\r",
									"                    \"favorited\"\r",
									"                ],\r",
									"                \"properties\": {\r",
									"                    \"slug\": {\r",
									"                        \"type\": \"string\"\r",
									"                    },\r",
									"                    \"title\": {\r",
									"                        \"type\": \"string\"\r",
									"                    },\r",
									"                    \"description\": {\r",
									"                        \"type\": \"string\"\r",
									"                    },\r",
									"                    \"body\": {\r",
									"                        \"type\": \"string\"\r",
									"                    },\r",
									"                    \"createdAt\": {\r",
									"                        \"type\": \"string\"\r",
									"                    },\r",
									"                    \"updatedAt\": {\r",
									"                        \"type\": \"string\"\r",
									"                    },\r",
									"                    \"tagList\": {\r",
									"                        \"type\": \"array\",\r",
									"                        \"items\": {\r",
									"                            \"type\": \"string\"\r",
									"                        }\r",
									"                    },\r",
									"                    \"author\": {\r",
									"                        \"type\": \"object\",\r",
									"                        \"required\": [\r",
									"                            \"username\",\r",
									"                            \"bio\",\r",
									"                            \"image\",\r",
									"                            \"following\"\r",
									"                        ],\r",
									"                        \"properties\": {\r",
									"                            \"username\": {\r",
									"                                \"type\": \"string\"\r",
									"                            },\r",
									"                            \"bio\": {\r",
									"                                \"type\": \"null\"\r",
									"                            },\r",
									"                            \"image\": {\r",
									"                                \"type\": \"string\"\r",
									"                            },\r",
									"                            \"following\": {\r",
									"                                \"type\": \"boolean\"\r",
									"                            }\r",
									"                        }\r",
									"                    },\r",
									"                    \"favoritesCount\": {\r",
									"                        \"type\": \"integer\"\r",
									"                    },\r",
									"                    \"favorited\": {\r",
									"                        \"type\": \"boolean\"\r",
									"                    }\r",
									"                }\r",
									"            }\r",
									"        },\r",
									"        \"articlesCount\": {\r",
									"            \"type\": \"integer\"\r",
									"        }\r",
									"    }\r",
									"}\r",
									"\r",
									"// valid schema test\r",
									"pm.test(\"Valid response schema favorited articles\", () =>{\r",
									"    pm.response.to.have.jsonSchema(getFavoritedArticlesResponse);\r",
									"});\r",
									"// Step 8: Verify that slug ID from Step 2 exist in one of the favorite articles\r",
									"pm.test(\"slug ID from Step 2 exist in one of the favorite articles\", function () {\r",
									"    pm.expect(pm.response.json().articles[0].slug).eqls(pm.collectionVariables.get(\"slug\"))\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{host}}/{{articles}}?favorited={{username}}&limit=10&offset=0",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}"
							],
							"query": [
								{
									"key": "favorited",
									"value": "{{username}}"
								},
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "offset",
									"value": "0"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get all list in global feed",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var host = pm.collectionVariables.get(\"host\");\r",
									"var articles = pm.collectionVariables.get(\"articles\");\r",
									"var token = pm.collectionVariables.get(\"token\");\r",
									"\r",
									"const getArticles = {\r",
									"    url: `${host}/${articles}/?limit=10&offset=0`,\r",
									"    method: 'GET',\r",
									"    header: `Authorization: Bearer ${token}`,\r",
									"    body: {}\r",
									"  };\r",
									"\r",
									"pm.sendRequest(getArticles, function (err, response) {\r",
									"    var res = response;\r",
									"    pm.test(\"get feed code 200\", function(){\r",
									"        pm.expect(res).to.have.property('code',200);\r",
									"        setTimeout(function(){}, 500);\r",
									"    });\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{host}}/{{articles}}?limit=10&offset=0",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}"
							],
							"query": [
								{
									"key": "limit",
									"value": "10"
								},
								{
									"key": "offset",
									"value": "0"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get the initial commentaries number",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// Step 4: Verify response schema\r",
									"const commentariesSchema = {\r",
									"    \"type\": \"object\",\r",
									"    \"required\": [\r",
									"        \"comments\"\r",
									"    ],\r",
									"    \"properties\": {\r",
									"        \"comments\": {\r",
									"            \"type\": \"array\",\r",
									"            \"items\": {\r",
									"                \"type\": \"object\",\r",
									"                \"required\": [\r",
									"                    \"id\",\r",
									"                    \"createdAt\",\r",
									"                    \"updatedAt\",\r",
									"                    \"body\",\r",
									"                    \"author\"\r",
									"                ],\r",
									"                \"properties\": {\r",
									"                    \"id\": {\r",
									"                        \"type\": \"integer\"\r",
									"                    },\r",
									"                    \"createdAt\": {\r",
									"                        \"type\": \"string\"\r",
									"                    },\r",
									"                    \"updatedAt\": {\r",
									"                        \"type\": \"string\"\r",
									"                    },\r",
									"                    \"body\": {\r",
									"                        \"type\": \"string\"\r",
									"                    },\r",
									"                    \"author\": {\r",
									"                        \"type\": \"object\",\r",
									"                        \"required\": [\r",
									"                            \"username\",\r",
									"                            \"bio\",\r",
									"                            \"image\",\r",
									"                            \"following\"\r",
									"                        ],\r",
									"                        \"properties\": {\r",
									"                            \"username\": {\r",
									"                                \"type\": \"string\"\r",
									"                            },\r",
									"                            \"bio\": {\r",
									"                                \"type\": \"null\"\r",
									"                            },\r",
									"                            \"image\": {\r",
									"                                \"type\": \"string\"\r",
									"                            },\r",
									"                            \"following\": {\r",
									"                                \"type\": \"boolean\"\r",
									"                            }\r",
									"                        }\r",
									"                    }\r",
									"                }\r",
									"            }\r",
									"        }\r",
									"    }\r",
									"}\r",
									"// valid response schema\r",
									"pm.test(\"Valid response to get method schema commentaries\", () =>{\r",
									"    pm.response.to.have.jsonSchema(commentariesSchema);\r",
									"    setTimeout(function(){}, 500);\r",
									"});\r",
									"\r",
									"// Step 5: Get the count of the comments array lentgh and save to variable\r",
									"\r",
									"var commentariesCount = pm.response.json().comments.length\r",
									"pm.collectionVariables.set(\"commentariesCount\", commentariesCount);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{host}}/{{articles}}/{{slug}}/comments",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}",
								"{{slug}}",
								"comments"
							]
						}
					},
					"response": []
				},
				{
					"name": "Post a test comment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"// # Step 6: Make a POST request to publish a new comment\r",
									"// # Step 7: Verify response schema that should contain posted comment text\r",
									"var host = pm.collectionVariables.get(\"host\");\r",
									"var articles = pm.collectionVariables.get(\"articles\");\r",
									"var slug = pm.collectionVariables.get(\"slug\");\r",
									"var token = pm.collectionVariables.get(\"token\");\r",
									"const commentResponse = {\r",
									"    \"type\": \"object\",\r",
									"    \"required\": [\r",
									"        \"comment\"\r",
									"    ],\r",
									"    \"properties\": {\r",
									"        \"comment\": {\r",
									"            \"type\": \"object\",\r",
									"            \"required\": [\r",
									"                \"id\",\r",
									"                \"createdAt\",\r",
									"                \"updatedAt\",\r",
									"                \"body\",\r",
									"                \"author\"\r",
									"            ],\r",
									"            \"properties\": {\r",
									"                \"id\": {\r",
									"                    \"type\": \"integer\"\r",
									"                },\r",
									"                \"createdAt\": {\r",
									"                    \"type\": \"string\"\r",
									"                },\r",
									"                \"updatedAt\": {\r",
									"                    \"type\": \"string\"\r",
									"                },\r",
									"                \"body\": {\r",
									"                    \"type\": \"string\"\r",
									"                },\r",
									"                \"author\": {\r",
									"                    \"type\": \"object\",\r",
									"                    \"required\": [\r",
									"                        \"username\",\r",
									"                        \"bio\",\r",
									"                        \"image\",\r",
									"                        \"following\"\r",
									"                    ],\r",
									"                    \"properties\": {\r",
									"                        \"username\": {\r",
									"                            \"type\": \"string\"\r",
									"                        },\r",
									"                        \"bio\": {\r",
									"                            \"type\": \"null\"\r",
									"                        },\r",
									"                        \"image\": {\r",
									"                            \"type\": \"string\"\r",
									"                        },\r",
									"                        \"following\": {\r",
									"                            \"type\": \"boolean\"\r",
									"                        }\r",
									"                    }\r",
									"                }\r",
									"            }\r",
									"        }\r",
									"    }\r",
									"}\r",
									"//test to validate response schema\r",
									"pm.test(\"Valid response to post method schema commentaries\", () =>{\r",
									"    pm.response.to.have.jsonSchema(commentResponse);\r",
									"    setTimeout(function(){},500);\r",
									"});\r",
									"// send get request to all comments to refresh results\r",
									"const getCommentariesToRefresh = {\r",
									"    url: `${host}/${articles}/${slug}/comments`,\r",
									"    method: 'GET',\r",
									"    header: `Authorization: Bearer ${token}`,\r",
									"    body: {}\r",
									"  };\r",
									"\r",
									"pm.sendRequest(getCommentariesToRefresh, function (err, response) {\r",
									"    var res = response.json();\r",
									"    pm.test(\"get commentaries to refresh have not errors\", function(){\r",
									"        pm.expect(err).to.equal(null);\r",
									"        setTimeout(function(){}, 500);\r",
									"    });\r",
									"    var count = res.comments.length;\r",
									"    pm.collectionVariables.set(\"finalCommentariesCount\", count);\r",
									"\r",
									"});\r",
									"\r",
									"// Step 8: Get the list of all comments for this article one more time\r",
									"const getCommentaries = {\r",
									"    url: `${host}/${articles}/${slug}/comments`,\r",
									"    method: 'GET',\r",
									"    header: `Authorization: Bearer ${token}`,\r",
									"    body: {}\r",
									"  };\r",
									"\r",
									"pm.sendRequest(getCommentaries, function (err, response) {\r",
									"    \r",
									"    pm.test(\"get commentaries have not errors\", function(){\r",
									"        pm.expect(err).to.equal(null);\r",
									"        var res = response.json();\r",
									"        \r",
									"\r",
									"        // save the 'test para borrar' comment\r",
									"        // is saved in the las position of the response schema\r",
									"        let arrayComment = res.comments;\r",
									"        let id_comment = arrayComment.at(-1).id;\r",
									"        pm.collectionVariables.set(\"id_comment\", id_comment);\r",
									"    });\r",
									"\r",
									"    // Step 9: Verify number of comments increased by 1 (similar like we did with favorite counts)\r",
									"    let initialCount =  pm.collectionVariables.get(\"commentariesCount\");\r",
									"    let finalCount = pm.collectionVariables.get(\"finalCommentariesCount\");\r",
									"    let expectedVaule = initialCount+1;\r",
									"\r",
									"// Step 9: Verify number of comments increased by 1 (similar like we did with favorite counts)\r",
									"    // test comments has increased by 1\r",
									"    pm.test(\"number of comments has increased by 1\", ()=>{\r",
									"        pm.expect(expectedVaule).to.equal(finalCount);\r",
									"        });\r",
									"});\r",
									"\r",
									"\r",
									"\r",
									"    "
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// # Step 8: Get the list of all comments for this article one more time\r",
									"var host = pm.collectionVariables.get(\"host\");\r",
									"var articles = pm.collectionVariables.get(\"articles\");\r",
									"var slug = pm.collectionVariables.get(\"slug\");\r",
									"var token = pm.collectionVariables.get(\"token\");\r",
									"const getCommentaries = {\r",
									"    url: `${host}/${articles}/${slug}/comments`,\r",
									"    method: 'GET',\r",
									"    header: `Authorization: Bearer ${token}`,\r",
									"    body: {}\r",
									"  };\r",
									"\r",
									"pm.sendRequest(getCommentaries, function (err, response) {\r",
									"    var res = response.json();\r",
									"    pm.test(\"get commentaries have not errors\", function(){\r",
									"        pm.expect(err).to.equal(null);\r",
									"        \r",
									"    });\r",
									"    var commentariesCount = res.comments.length\r",
									"    pm.collectionVariables.set(\"commentariesCount\", commentariesCount);\r",
									"    pm.test('commentCount is saved', function(){\r",
									"        pm.expect(commentariesCount).eqls(0)\r",
									"    });\r",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"comment\": {\r\n        \"body\": \"test para borrar\"\r\n    }\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{host}}/{{articles}}/{{slug}}/comments",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}",
								"{{slug}}",
								"comments"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete the posted comment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var host = pm.collectionVariables.get(\"host\");\r",
									"var articles = pm.collectionVariables.get(\"articles\");\r",
									"var slug = pm.collectionVariables.get(\"slug\");\r",
									"var token = pm.collectionVariables.get(\"token\");\r",
									"\r",
									"// send get request to all comments to refresh results\r",
									"const getCommentaries = {\r",
									"    url: `${host}/${articles}/${slug}/comments`,\r",
									"    method: 'GET',\r",
									"    header: `Authorization: Bearer ${token}`,\r",
									"    body: {}\r",
									"  };\r",
									"\r",
									"\r",
									"\r",
									"// test comment was deleted\r",
									"pm.test(\"Delete test comment got Status code 204\", function () {\r",
									"    pm.response.to.have.status(204);\r",
									"\r",
									"    pm.sendRequest(getCommentaries, function (err, response) {\r",
									"        var res = response.json();\r",
									"        pm.test(\"get commentaries after delete has not errors\", function(){\r",
									"            pm.expect(err).to.equal(null);\r",
									"            setTimeout(function(){}, 500);\r",
									"        });\r",
									"        let count = res.comments.length;\r",
									"        pm.collectionVariables.set(\"afterDeleteCount\", count);\r",
									"\r",
									"    });\r",
									"});\r",
									"    \r",
									"\r",
									"    // Verify number of comments decreased by 1\r",
									"    // test comments has decreased by 1\r",
									"    pm.test(\"number of comments has decreased by 1\", ()=>{\r",
									"        let initialCount =  pm.collectionVariables.get(\"finalCommentariesCount\");\r",
									"        let finalCount = pm.collectionVariables.get(\"afterDeleteCount\");\r",
									"        pm.expect(finalCount).to.equal(initialCount-1);\r",
									"        });\r",
									"\r",
									"\r",
									"\r",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{token}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "default"
							}
						],
						"url": {
							"raw": "{{host}}/{{articles}}/{{slug}}/comments/{{id_comment}}",
							"host": [
								"{{host}}"
							],
							"path": [
								"{{articles}}",
								"{{slug}}",
								"comments",
								"{{id_comment}}"
							],
							"query": [
								{
									"key": "",
									"value": null,
									"disabled": true
								}
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "login-path",
			"value": "api/users/login",
			"type": "string"
		},
		{
			"key": "token",
			"value": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImpjYW0ucXZpc2lvbkBnbWFpbC5jb20iLCJ1c2VybmFtZSI6IkRvbmF0ZWxvIiwicGFzc3dvcmQiOiIkMmEkMTAkN2UyWTFUSUlDZFhUYW1aM0ZIbXVoZUFwLml2dHVXRUY1T01yRDM0L0hJWGVhcEdJMklyMjYiLCJiaW8iOm51bGwsImltYWdlIjoiaHR0cHM6Ly9hcGkucmVhbHdvcmxkLmlvL2ltYWdlcy9zbWlsZXktY3lydXMuanBlZyIsImlhdCI6MTY0MTkxNzAwNywiZXhwIjoxNjQ3MTAxMDA3fQ.riGYB4-FvfBGROAJ2Z_v-kp4wgDFXmr1yPZGoGEWkZ8"
		},
		{
			"key": "tags",
			"value": "api/tags",
			"type": "string"
		},
		{
			"key": "articles",
			"value": "api/articles",
			"type": "string"
		},
		{
			"key": "feed",
			"value": "feed",
			"type": "string"
		},
		{
			"key": "slug",
			"value": "",
			"type": "string"
		},
		{
			"key": "comments",
			"value": "",
			"type": "string"
		},
		{
			"key": "id_comment",
			"value": "",
			"type": "string"
		},
		{
			"key": "initialFavoritesCount",
			"value": "",
			"type": "string"
		},
		{
			"key": "host",
			"value": "https://api.realworld.io",
			"type": "string"
		},
		{
			"key": "finalFavoritesCount",
			"value": "",
			"type": "string"
		},
		{
			"key": "username",
			"value": "",
			"type": "string"
		},
		{
			"key": "commentariesCount",
			"value": "",
			"type": "string"
		},
		{
			"key": "finalCommentariesCount",
			"value": "",
			"type": "string"
		},
		{
			"key": "afterDeleteCount",
			"value": "",
			"type": "string"
		},
		{
			"key": "tagsCount",
			"value": "",
			"type": "string"
		},
		{
			"key": "articleCounter",
			"value": "",
			"type": "string"
		}
	]
}